{"context":{"name_mp3":"au.mp3","name_srt":"au.srt","working_dir":"/tmp/"},"input_type":"Object","preserve_context":false,"first":{"Node":{"id":"generate audio","executor":{"Command":{"command":"ffmpeg","args":[{"Static":"-i"},{"ParsedInput":{"path":"video","required":false}},{"Static":"-vn"},{"Static":"-acodec"},{"Static":"libmp3lame"},{"Concat":[{"Context":{"path":"working_dir","required":false}},{"Context":{"path":"name_mp3","required":false}}]}],"output":[{"Success":{}}]}},"output":{"path":"result_vid2au","ty":"Bool","merge":"Insert"},"destination":[{"next":{"Node":"generate eng srt"},"condition":{"Eq":{"from_1":{"Context":{"path":"result_vid2au","required":false}},"from_2":{"Static":true}}}},{"next":{"ExitErr":[{"from":{"Static":"Se han producido errores al generar el audio"}}]},"condition":"True"}]}},"nodes":[{"Node":{"id":"generate eng srt","executor":{"Command":{"command":"whisper","args":[{"Concat":[{"Context":{"path":"working_dir","required":false}},{"Context":{"path":"name_mp3","required":false}}]},{"Static":"--model"},{"Static":"medium.en"},{"Static":"--output_format"},{"Static":"srt"},{"Static":"--output_dir"},{"Context":{"path":"working_dir","required":false}}],"output":[{"Object":{}}]}},"output":{"path":"result_au2srt","ty":"Object","merge":"Insert"},"destination":[{"next":{"Node":"cat srt"},"condition":{"Eq":{"from_1":{"Context":{"path":"result_au2srt/success","required":false}},"from_2":{"Static":true}}}},{"next":{"ExitErr":[{"from":{"Static":"Se ha producido un error al generar el srt en inglés"}}]},"condition":"True"}]}},{"Node":{"id":"translate","executor":{"Agent":{"provider":{"OpenAI":{"api_key":"AWPAK_OPENAI_API_KEY","model":"gpt-4.1"}},"system_prompt":"You are an AI assistant that receives a subtitle file in `.srt` format written in English. Your task is to translate only the subtitle texts into Spanish, while preserving all time codes and structure exactly as they appear in the original file.\n\n* Do **not** change or reformat any timecodes.\n* Only translate the subtitle texts (lines that are not numbers or timestamps).\n* Keep the same line breaks and spacing as in the original subtitle entries.\n\n**Input:**\nAn SRT file in English.\n\n**Output:**\nA new SRT file in Spanish, with identical timing, and only the texts translated.\n\nLa salida debe ser el fichero traducido al español en formato srt. No incluyas ningún comentario ni explicación.","save_history":false,"prompt":[{"from":{"Context":{"path":"result_au2srt/out","required":false}}}],"servers":[]}},"output":{"path":"srt_traducido","merge":"Insert"},"destination":[{"next":{"ExitOk":[{"from":{"Context":{"path":"srt_traducido","required":false}},"prefix":""}]},"condition":"True"}]}},{"Node":{"id":"cat srt","executor":{"Command":{"command":"cat","args":[{"Concat":[{"Context":{"path":"working_dir"}},{"Context":{"path":"name_srt"}}]}],"output":[{"Object":{}}]}},"output":{"path":"result_au2srt","ty":"Object","merge":"Insert"},"destination":[{"next":{"Node":"translate"},"condition":{"Eq":{"from_1":{"Context":{"path":"result_au2srt/success"}},"from_2":{"Static":true}}}},{"next":{"ExitErr":[{"from":{"Context":{"path":"result_au2srt/out"}}},{"from":{"Context":{"path":"result_au2srt/err"}}}]},"condition":"True"}]}}]}